<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="/images/icon_white_rat.png" type="image/x-icon">
    <link rel="shortcut icon" href="/images/icon_white_rat.png" type="image/x-icon">

    <link href="./css/HomePage.css" rel="stylesheet">
    <link href="./css/Login.css" rel="stylesheet">
    <link href="./css/UserInfo.css" rel="stylesheet">
    <link href="./css/Loading.css" rel="stylesheet">
    <link href="./css/Game.css" rel="stylesheet">
    <link href="./css/Stretch.css" rel="stylesheet">
    <link href="./css/FriendList.css" rel="stylesheet">
    <link href="./css/GamePage.css" rel="stylesheet">
    <link href="./css/deposit.css" rel="stylesheet" >
    <link href="./css/withdraw.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <!-- 先借icon來用等確定後再改 -->
    <script src="./dist/main.js" defer></script>
    <title>I Want Bonk You</title>
</head>
<body>
    
    <div class="navbar">
        <a href="#Home_Page" class="nav-item" ><img src="./images/icon_white_rat.png" alt="HomeBtn" style="width: 30px;height: auto;"></a>
        <a href="#Game_Page" class="nav-item">Start Game</a>
        <a id="Login-btn" class="nav-item">Login/SignUp</a>
        <a id="Logout-btn" style="display:none;cursor: pointer;" class="nav-item">Log out</a>
        <div id ="Wallet_set">
            <a id="connect_wallet" class="nav-item wallet-btn">connect wallet</a>
            <div id="Wallet_Contrel" class="list-container">
                <ul>
                    <li id="Copy_Address" style="cursor: pointer;">Copy address</li>
                    <li id="Disconnect" style="cursor: pointer;">Disconnect</li>
                </ul>
            </div>
        </div>
    </div>
    <div id="Font_Page" class="Font_Page">    
        <section id="Home_Page" class="Home_page content Guide_To_User_Info">
            <h3>Get Bonk or Bonk someone on head</h3>
            
        </section>
        <!--
        <section id="User_Info" class="User_Info content">
            
        </section>
        !-->
        
        <section id="Game_Page" class="content">
            <!--
            <label id="MSG_Connect">Before Play The Game<br>Please Connect Wallet</label>
            !-->
            <div id='game_ui' class="game-ui">
                <!-- 餘額區域 -->
                <div class="balance-container">
                    <div class="balance-item">
                        <img src="./images/sol.png" alt="SOL Icon" class="balance-icon">
                        <span id="sol-balance" class="sol-balance">0 SOL</span>
                    </div>
                    <div class="balance-item">
                        <img src="./images/bonk.png" alt="BONK Icon" class="balance-icon">
                        <span id="bonk-balance" class="bonk-balance">0 BONK</span>
                    </div>
                </div>
                <!-- 遊戲圖標 -->
                <div class="game-header">
                    <img src="./images/icon.png" alt="Hammer Icon" class="game-icon">
                </div>
        
                <!-- 功能按鈕區域 -->
                <div class="top-actions">
                    <button id="user-info-button" class="info-btn">User Info</button>
                    <button id="friends-button" class="friends-btn">Friends</button>
                    <button id="deposit-button" class="leaderboard-btn">Deposit</button>
                    <button id="Withdorw-button" class="leaderboard-btn">WithDraw</button>
                </div>
            
                <!-- 遊戲功能按鈕 -->
                <div class="game-actions">
                    <button id='Bonk-button' class="action-button bonk-btn">BONK!</button>
                    <button id='stretch-button'class="action-button stretch-btn">Stretch!</button>
                </div>
            
                <!-- How to Play 按鈕 -->
                <button id="how-to-play-button" class="help-btn">?</button>
                <!-- 遮罩 -->
                <div id="wallet-overlay" class="wallet-overlay">
                    <div class="overlay-content">
                        <p>Please connect your wallet to start playing!</p>
                        <button id="connect-wallet-button" class="connect-wallet-btn">Connect Wallet</button>
                    </div>
                </div>
            </div>
            
             <div id='profile' class="user-profile-container">
                <h3>UserInfo</h3>
                <!-- 動態加載部分 -->
                <div id="dynamic-user-info">
                    <!-- Avatar -->
                    <div class="user-avatar">
                        <img id="user-avatar-image" src="https://via.placeholder.com/150" alt="User Avatar">
                        <input type="file" id="avatar-upload-input" accept="image/*" style="display: none;">
                    </div>
                    
                    <!-- Nickname -->
                    <div class="user-detail-item" style="display: flex;">
                        <label for="user-nickname" style="margin-right: 15px; display: inline;">Name:</label>
                        <span id="user-nickname"></span>
                    </div>
        
                    <!-- Bio -->
                    <div class="user-detail-item">
                        <label for="user-bio">Bio:</label>
                        <p id="user-bio-display">This is your bio. Click "Edit" to modify it.</p>
                        <textarea id="user-bio-edit" placeholder="Write something about yourself..." style="display: none;"></textarea>
                        <button id="edit-bio-button">Edit</button>
                        <button id="save-bio-button" style="display: none;">Save</button>
                    </div>
                </div>
                <button id="user-back-button" class="back-button">Back to Game</button>
                <button id="add-detail-button">Send friend requset</button>
            </div>
            <!--Friend-->
            <div id="friend"class="friends-container">
               
            
                <!-- Tabs 切換 -->
                <div class="friends-tabs">
                    <button class="tab active" id="tab-friends">Friends</button>
                    <button class="tab" id="tab-invites">Invitations</button>
                </div>
            
                <!-- 列表 -->
                <div id="friends-invites-list" class="tab-content">
                    <table class="friends-table">
                        <thead>
                            <tr>
                                <th>Avatar</th>
                                <th>Nickname</th>
                                <th id="table-header-bonk">BONK Count</th>
                                <th id="table-header-status">Status</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody id="friends-invites-tbody">
                            <!-- 動態數據加載 -->
                        </tbody>
                    </table>
            
                    <!-- 分頁控制 -->
                    <div class="pagination">
                        <button id="prev-page" class="page-btn" disabled>Previous</button>
                        <span id="current-page">1</span>
                        <button id="next-page" class="page-btn">Next</button>
                    </div>
                </div>
                 <!-- 返回按鈕 -->
                 <button id="friend-back-to-game" class="friend-back-btn">Back</button>
            </div>

            <!--Leaderboard-->
            <div id="leaderboard-container" class="leaderboard hidden">
                <!-- 標題 -->
                <div class="leaderboard-header">
                    <h2>Leaderboard</h2>
                    <button id="leaderboard-rules-btn" class="rules-btn">!</button>
                </div>
            
                <!-- 排行榜表格 -->
                 
                <div class="leaderboard-table-wrapper">
                    <table class="leaderboard-table">
                        <thead>
                            <tr>
                                <th>Rank</th>
                                <th>Avatar</th>
                                <th>Nickname</th>
                                <th>Bonk Earnings</th>
                            </tr>
                        </thead>
                        <tbody id="leaderboard-tbody">
                            <!-- 動態數據加載 -->
                        </tbody>
                    </table>
                </div>
                <!-- 返回按鈕 -->
                <button id="back-to-game-leaderboard" class="back-btn">Back</button>
            </div>
            
            <!-- 排行榜規則彈窗 -->
            <div id="rules-modal" class="modal hidden">
                <div class="modal-content">
                    <span id="close-rules-modal" class="close-btn">&times;</span>
                    <h2>Leaderboard Rules</h2>
                    <p>The leaderboard ranks players based on the total BONK earnings they have accumulated from BONKing others.</p>
                    <p>Top 10 players with the highest BONK earnings are displayed here.</p>
                    <p>Earn more BONK by BONKing others and climb the leaderboard!</p>
                </div>
            </div>
            
            <div id="deposit-container" class="deposit hidden">
                <!-- 遊戲帳戶創建模態框 -->

                <div id="create-account-modal" class="modal hidden">
                <div class="balance-container">
                    <div class="balance-item">
                        <img src="your-sol-icon.png" alt="SOL Icon" class="balance-icon">
                        <span id="sol-balance" class="sol-balance">0 SOL</span>
                    </div>
                    <div class="balance-item">
                        <img src="your-bonk-icon.png" alt="BONK Icon" class="balance-icon">
                        <span id="bonk-balance" class="bonk-balance">0 BONK</span>
                    </div>
                </div>
                    <div class="modal-content">
                        <span id='closeBtn' class="close">&times;</span>
                        <h3>No Deposit Account Found</h3>
                        <p>Your wallet doesn't have a deposit account in this game. Please create one to proceed.</p>
                        <button id="create-account-btn" class="create-account-btn">Create Account</button>
                        <button id="back-to-deposit" class="back-btn">Back</button>
                    </div>
                </div>
                <!-- 遊戲內餘額 -->
                <div class="balance-container">
                    <div class="balance-item">
                        <img src="./images/sol.png" alt="SOL Icon" class="balance-icon">
                        <span id="sol-balance" class="sol-balance">0 SOL</span>
                    </div>
                    <div class="balance-item">
                        <img src="./images/bonk.png" alt="BONK Icon" class="balance-icon">
                        <span id="bonk-balance"  class="bonk-balance">0 BONK</span>
                    </div>
                </div>
            
                <!-- 標題 -->
                <h2>Deposit</h2>
            
                <!-- 選擇存款貨幣 -->
                <div class="currency-switch">
                    <button id="deposit-sol-btn" class="currency-btn active">SOL</button>
                    <button id="deposit-bonk-btn" class="currency-btn">BONK</button>
                </div>
                
            
                <!-- 滑動條和金額輸入 -->
                <div class="deposit-slider-container">
                    <label for="deposit-slider" class="slider-label">
                        Amount to Deposit:
                        <input type="number" id="custom-amount" min="0" step="0.0001" value="0" class="custom-input">
                    </label>
                    <input type="range" id="deposit-slider" min="0" max="0" value="0" step="0.0001">
                    <div class="slider-value">
                        <span id="deposit-amount">0</span> <span id="currency-label">SOL</span>
                    </div>
                </div>
            
            
                <!-- 確認按鈕 -->
                <button id="confirm-deposit-btn" class="confirm-btn">Deposit</button>
                <!-- 返回按鈕 -->
                <button id="back-to-game-deposit" class="back-btn">Back</button>
            </div>
            
            <!-- Withdraw -->
            <div id="Withdorw_Page" style="display: none">
                <div class="stretch-container">
                    <button class="back-btn" id="Withdorw-back-button">Back</button>
                    <h2>Withdraw Funds</h2>
        
                    <!-- 代幣選擇按鈕 -->
                    <div class="currency-switch">
                        <button class="currency-btn active" id="sol-btn">SOL</button>
                        <button class="currency-btn" id="token-btn">Bonk</button>
                    </div>
        
                    <!-- 拉桿 -->
                    <div class="withdraw-slider-container">
                        <label class="slider-label" for="withdraw-amount">Select Amount:</label>
                        <input type="range" id="withdraw-amount" min="0" max="100" value="0" step="0.0001">
                    </div>
        
                    <!-- 自訂金額輸入 -->
                    <div class="custom-amount-container">
                        <label for="custom-amount">Custom Amount:</label>
                        <input type="number" class="custom-input" id="withdraw-custom-amount" placeholder="Enter Amount" >
                    </div>
                    <input type="hidden" id="withdrawType", value="SQL">
                    <!-- 確認按鈕 -->
                    <button class="confirm-btn" id="confirm-btn">Confirm Withdrawal</button>
                </div>
            </div>
            
            
            <!-- Stretch UI -->
            <div id="stretch_ui" style="display: none;">
                
                <div class="stretch-container">
                     <!-- 餘額區域 -->
                    <div class="balance-container">
                        <div class="balance-item">
                            <img src="./images/sol.png" alt="SOL Icon" class="balance-icon">
                            <span id="sol-balance" class="sol-balance">0 SOL</span>
                        </div>
                        <div class="balance-item">
                            <img src="./images/bonk.png" alt="BONK Icon" class="balance-icon">
                            <span id="bonk-balance" class="bonk-balance">0 BONK</span>
                        </div>
                    </div>
                    <!-- 角色區域 -->
                    <div class="character">
                        <div id="head" class="head">
                            <img id="stretch-player-avatar" src="https://via.placeholder.com/150" alt="Player Avatar">
                        </div>
                        <div id="neck" class="neck"></div>
                    </div>
        
                    <!-- 設定與數據區域 -->
                    <div class="settings">
                        <p id="duration-display">Stretch Duration: 0 seconds</p>
                        <p id="profit-display">Current Profit: 0</p>
                    </div>
            
                    <!-- 控制按鈕 -->
                    <div class="button-div">
                        <button id="open-settings-button" class="stretch-button">Start Stretching</button>
                        <button id="stop-stretch-button" class="stretch-button" style="display: none;">Stop Stretching</button>
                        <button id="back-button" class="back-button">Back to Menu</button>
                    </div>
                </div>
            </div>

            <!-- stretch設定數值的彈窗 -->
            <div id="stretch-settings-modal" class="modal hidden">
                <div class="modal-content">
                    <div class="balance-container">
                        <div class="balance-item">
                            <img src="./images/sol.png" alt="SOL Icon" class="balance-icon">
                            <span id="sol-balance" class="sol-balance">0 SOL</span>
                        </div>
                        <div class="balance-item">
                            <img src="./images/bonk.png" alt="BONK Icon" class="balance-icon">
                            <span id="bonk-balance" class="bonk-balance">0 BONK</span>
                        </div>
                    </div>
                    <span id="close-settings-modal" class="close">&times;</span>
                    <h3>Set Stretch Settings</h3>

                    <!-- 選擇貨幣 -->
                    <div class="currency-switch">
                        <button id="modal-sol-btn" class="currency-btn active">SOL</button>
                        <button id="modal-bonk-btn" class="currency-btn">BONK</button>
                    </div>

                    <!-- 設置數字 -->
                    <div class="settings">
                        <label for="modal-bet-amount">Bet Amount (<span id="modal-currency-label">BONK</span>):</label>
                        <input type="number" id="modal-bet-amount" min="1" placeholder="Enter your bet" />
                    </div>

                    <!-- 確認按鈕 -->
                    <button id="confirm-settings-button" class="confirm-btn">Confirm</button>
                </div>
            </div>
            
            <!-- bonk選目標畫面 -->
            <div id="bonk_ui" style="display: none;">
                <div id='select_taget' class="stretch-container BonkPerparPage">
                    <div class="balance-container">
                        <div class="balance-item">
                            <img src="./images/sol.png" alt="SOL Icon" class="balance-icon">
                            <span id="sol-balance" class="sol-balance">0 SOL</span>
                        </div>
                        <div class="balance-item">
                            <img src="./images/bonk.png" alt="BONK Icon" class="balance-icon">
                            <span id="bonk-balance" class="bonk-balance">0 BONK</span>
                        </div>
                    </div>
                    <div id="bonk_page" >
                        loading
                    </div>
                    <button id="back-button1" class="back-button">Back to Game</button>
                    <button id="Bonk" class="stretch-button" disabled>Bonk</button>
                    <input id="Target" type="hidden" value="-1"><!---目標名稱 -->
                    <input id="TargetPK" type="hidden" value="-1"><!---目標公鑰 -->
                </div>
            </div>

            <!-- Bonk畫面 -->
            <div id="bonking_page" style="display: none;">
                <div class="stretch-container">
                    <h3 id="GameTitle">Start！！！</h3>
                    <div class="run_area">
                        <img class="doges" src="./images/doge.png">
                        <img class="doges" src="./images/doge.png">
                        <img class="doges" src="./images/doge.png">
                        <img class="doges" src="./images/doge.png">
                        <img class="doges" src="./images/doge.png">
                    </div>
                    <div id="finish_page" style="display: none;">
                        <button id="back_to_home" class="stretch-button">Back to home</button>
                        <button id="play_again" class="back-button">play again</button>
                    </div>
                </div>
            </div>
            
        </section>
    </div>
    
    <!-- 登入登出彈窗 -->
    <div id="LoginSignUp-popup" class="LoginSignUp-popup">
        <div class="LoginSignUp-popup-content">
            <span class="close">&times;</span>
            <div id="form-container">
                <!-- SignUp 表單 -->
                <form id="signupForm" class="form-style" action="http://localhost:3000/api/users/signup" method="POST">
                    <h2>Sign Up</h2>
                    <label for="username">Username:</label>
                    <input type="text" id="username" name="user_name" required oninvalid="this.setCustomValidity('Please enter your username')">
                    
                    <label for="nickname">Name:</label>
                    <input type="text" id="nickname" name="nick_name" required oninvalid="this.setCustomValidity('Please enter your nickname')">
                    
                    <label for="password">Password:</label>
                    <input type="password" id="password" name="password" required oninvalid="this.setCustomValidity('Please enter your password')">
                    <label for="Confirm onpassword">Confirm Password:</label>
                    <input type="password" id="confirmpassword" name="confirmpassword" oninvalid="this.setCustomValidity('Please confirm your password')">
                    
                    <button type="submit">Sign Up</button>
                    <p>Already have an account? <a href="#" id="show-login">Login</a></p>
                </form>
    
                <!-- Login 表單 -->
                <form id="loginForm" class="form-style" action="http://localhost:3000/api/users/login" method="POST" style="display: none;">
                    <h2>Login</h2>
                    <label for="username-login">Username:</label>
                    <input type="text" id="usernameLogin" name="user_name" required oninvalid="this.setCustomValidity('Please enter your password')">
                    
                    <label for="password-login">Password:</label>
                    <input type="password" id="passwordLogin" name="password" required oninvalid="this.setCustomValidity('Please enter your password')">
                    
                    <button type="submit" id="LoginSubmit">Login</button>
                    <p>Don't have an account? <a href="#" id="show-signup">Sign Up</a></p>
                </form>
            </div>
        </div>

    </div>
    <div id="loading-spinner" style="display: none;">
        <div class="spinner"></div>
    </div>
    

</body>